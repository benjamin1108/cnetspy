# AI åˆ†æåŠŸèƒ½ä½¿ç”¨è¯´æ˜

## åŠŸèƒ½æ¦‚è¿°

AI åˆ†æåŠŸèƒ½ä½¿ç”¨ Gemini æ¨¡å‹å¯¹çˆ¬å–çš„äº‘å‚å•†æ›´æ–°å†…å®¹è¿›è¡Œæ™ºèƒ½åˆ†æï¼Œç”Ÿæˆä»¥ä¸‹å­—æ®µï¼š

- **title_translated**: ä¸­æ–‡ç¿»è¯‘æ ‡é¢˜
- **content_summary**: ç»“æ„åŒ–æ‘˜è¦ï¼ˆMarkdown æ ¼å¼ï¼‰
- **update_type**: æ›´æ–°ç±»å‹åˆ†ç±»ï¼ˆnew_product, new_feature, enhancement ç­‰ï¼‰
- **product_subcategory**: äº§å“å­ç±»ï¼ˆåŠ¨æ€åˆ¤å®šï¼‰
- **tags**: å…³é”®è¯æ ‡ç­¾ï¼ˆJSON æ•°ç»„ï¼‰

## ç¯å¢ƒé…ç½®

### 1. å®‰è£…ä¾èµ–

é¦–å…ˆå®‰è£… google-generativeai åº“ï¼š

```bash
pip install google-generativeai>=0.3.0
```

æˆ–ä½¿ç”¨é¡¹ç›®çš„ requirements.txtï¼š

```bash
pip install -r requirements.txt
```

### 2. é…ç½® Gemini API Key

åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º `.env` æ–‡ä»¶ï¼ˆå¯ä»¥ä» `.env.example` å¤åˆ¶ï¼‰ï¼š

```bash
cp .env.example .env
```

ç¼–è¾‘ `.env` æ–‡ä»¶ï¼Œæ·»åŠ æ‚¨çš„ Gemini API Keyï¼š

```bash
# Gemini API å¯†é’¥ï¼ˆAI åˆ†æåŠŸèƒ½å¿…é¡»ï¼‰
GEMINI_API_KEY=ä½ çš„_Gemini_API_å¯†é’¥
```

### 3. é…ç½®æ¨¡å‹å‚æ•°ï¼ˆå¯é€‰ï¼‰

AI æ¨¡å‹çš„é…ç½®æ–‡ä»¶ä½äº `config/ai_model.yaml`ï¼Œæ‚¨å¯ä»¥è°ƒæ•´ä»¥ä¸‹å‚æ•°ï¼š

- `model_name`: æ¨¡å‹åç§°ï¼ˆé»˜è®¤ gemini-2.0-flash-expï¼‰
- `temperature`: æ§åˆ¶è¾“å‡ºéšæœºæ€§ï¼ˆ0.0-1.0ï¼Œé»˜è®¤ 0.5ï¼‰
- `top_p`: æ ¸é‡‡æ ·å‚æ•°ï¼ˆé»˜è®¤ 0.9ï¼‰
- `top_k`: å€™é€‰è¯æ•°é‡ï¼ˆé»˜è®¤ 40ï¼‰
- `max_output_tokens`: æœ€å¤§è¾“å‡ºé•¿åº¦ï¼ˆé»˜è®¤ 65535ï¼‰
- `interval`: API è¯·æ±‚é—´éš”ç§’æ•°ï¼ˆé»˜è®¤ 0.5 ç§’ï¼‰
- `max_retries`: æœ€å¤§é‡è¯•æ¬¡æ•°ï¼ˆé»˜è®¤ 3 æ¬¡ï¼‰

## ä½¿ç”¨æ–¹æ³•

### åˆ†æå•æ¡è®°å½•

åˆ†ææŒ‡å®š ID çš„æ›´æ–°è®°å½•ï¼š

```bash
./run.sh analyze --update-id <æ›´æ–°ID>
```

### æ‰¹é‡åˆ†æ

æ‰¹é‡åˆ†ææ‰€æœ‰æœªå¤„ç†çš„è®°å½•ï¼š

```bash
# åˆ†ææ‰€æœ‰æœªå¤„ç†è®°å½•
./run.sh analyze --batch

# åˆ†æå‰ 100 æ¡
./run.sh analyze --batch --limit 100

# ä»…åˆ†æ AWS çš„è®°å½•
./run.sh analyze --batch --vendor aws

# ä»…åˆ†æ Azure çš„è®°å½•
./run.sh analyze --batch --vendor azure
```

### é¢„è§ˆæ¨¡å¼

ä½¿ç”¨ `--dry-run` å¯ä»¥é¢„è§ˆåˆ†æç»“æœè€Œä¸å†™å…¥æ•°æ®åº“ï¼š

```bash
./run.sh analyze --batch --limit 10 --dry-run
```

### è¯¦ç»†æ—¥å¿—

ä½¿ç”¨ `--verbose` æŸ¥çœ‹è¯¦ç»†çš„åˆ†æè¿‡ç¨‹ï¼š

```bash
./run.sh analyze --batch --limit 10 --verbose
```

## å‘½ä»¤è¡Œé€‰é¡¹

| é€‰é¡¹ | è¯´æ˜ |
|------|------|
| `--update-id <ID>` | åˆ†ææŒ‡å®š ID çš„æ›´æ–°è®°å½• |
| `--batch` | æ‰¹é‡åˆ†ææ‰€æœ‰æœªå¤„ç†è®°å½• |
| `--limit <æ•°é‡>` | é™åˆ¶æ‰¹é‡å¤„ç†æ•°é‡ |
| `--vendor <å‚å•†>` | ä»…åˆ†ææŒ‡å®šå‚å•†çš„è®°å½•ï¼ˆaws, azure, gcp, huawei, tencentcloud, volcengineï¼‰ |
| `--dry-run` | é¢„è§ˆæ¨¡å¼ï¼Œä¸å®é™…å†™å…¥æ•°æ®åº“ |
| `--force` | å¼ºåˆ¶é‡æ–°åˆ†æå·²åˆ†æè¿‡çš„è®°å½• |
| `--verbose` | æ˜¾ç¤ºè¯¦ç»†æ—¥å¿— |

## è¾“å‡ºç¤ºä¾‹

æ‰¹é‡åˆ†ææ—¶ä¼šæ˜¾ç¤ºå®æ—¶è¿›åº¦ï¼š

```
ğŸ”„ å¼€å§‹æ‰¹é‡åˆ†æ...
ğŸ“Š å¾…å¤„ç†è®°å½•: 150 æ¡

[â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘] 50/150 (33.3%) | æˆåŠŸ: 48 | å¤±è´¥: 2 | è€—æ—¶: 5m12s

âœ… åˆ†æå®Œæˆ!
æ€»è®¡: 150 æ¡
æˆåŠŸ: 145 æ¡ (96.7%)
å¤±è´¥: 5 æ¡ (3.3%)
æ€»è€—æ—¶: 15m32s
```

## æ³¨æ„äº‹é¡¹

1. **API é™æµ**: Gemini API æœ‰é€Ÿç‡é™åˆ¶ï¼Œé»˜è®¤é…ç½®ä¸º 0.5 ç§’é—´éš”ï¼ˆæ¯åˆ†é’Ÿçº¦ 120 æ¬¡è¯·æ±‚ï¼‰
2. **æˆæœ¬æ§åˆ¶**: æ‰¹é‡åˆ†æä¼šäº§ç”Ÿ API è°ƒç”¨æˆæœ¬ï¼Œå»ºè®®å…ˆç”¨ `--limit` æµ‹è¯•å°æ‰¹é‡
3. **å¤±è´¥é‡è¯•**: ç³»ç»Ÿä¼šè‡ªåŠ¨é‡è¯•å¤±è´¥çš„è¯·æ±‚ï¼ˆæœ€å¤š 3 æ¬¡ï¼‰ï¼Œå¤±è´¥è®°å½•ä¼šè®°å½•åˆ°æ—¥å¿—
4. **å†…å®¹é•¿åº¦**: è¿‡é•¿çš„ content ä¼šè¢«æˆªæ–­è‡³ 8000 å­—ç¬¦ä»¥é¿å…è¶…è¿‡ token é™åˆ¶
5. **æ¨¡å‹è¾“å‡º**: max_output_tokens è®¾ç½®ä¸º 65535ï¼Œæ”¯æŒç”Ÿæˆè¾ƒé•¿çš„æ‘˜è¦å†…å®¹

## æ•…éšœæ’æŸ¥

### ImportError: cannot import name 'genai'

ç¡®ä¿å·²å®‰è£… google-generativeai åº“ï¼š

```bash
pip install google-generativeai
```

### API è®¤è¯å¤±è´¥

æ£€æŸ¥ `.env` æ–‡ä»¶ä¸­çš„ `GEMINI_API_KEY` æ˜¯å¦æ­£ç¡®é…ç½®ã€‚

### æ•°æ®åº“è¿æ¥é”™è¯¯

ç¡®ä¿æ•°æ®åº“æ–‡ä»¶å­˜åœ¨ï¼š

```bash
ls -la data/sqlite/updates.db
```

## æŸ¥çœ‹åˆ†æç»“æœ

å¯ä»¥é€šè¿‡æ•°æ®åº“æŸ¥è¯¢æŸ¥çœ‹åˆ†æç»“æœï¼š

```bash
sqlite3 data/sqlite/updates.db "SELECT update_id, title_translated, update_type FROM updates WHERE title_translated IS NOT NULL LIMIT 10;"
```

æˆ–ä½¿ç”¨ç°æœ‰çš„æ•°æ®æ£€æŸ¥å·¥å…·ï¼š

```bash
./run.sh check
```
